"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Statements=function e(){_classCallCheck(this,e)},statements={selectedNodes:[]};function convertAllStatmentsToMap(e){console.log(e);var t=[],n=[];for(i in e){e[i].id=i,e[i].label=e[i].text,t.push(e[i]);var o=e[i],a=o.parents,s=o.kids;console.log(a,s),a.forEach(function(e){n.push({from:e,to:i})}),s.forEach(function(e){n.push({from:i,to:e})})}data={nodes:t,edges:n},console.log(data),createMap(data)}function createMap(e){var t=document.getElementById("mynetwork"),n=new vis.Network(t,e,{nodes:{color:{border:"blue",background:"white"},shape:"box",fixed:!1,font:"12px arial blue",scaling:{label:!0},margin:4,shadow:!0,widthConstraint:150}});statements.network=n,statements.network.on("hold",function(e){console.log("hold"),console.dir(e),showStatementEditor(e.event.center)}),statements.network.on("selectNode",function(e){console.log("selectNode"),console.log(e),statements.selectedNodes=e.nodes}),statements.network.on("deselectNode",function(e){console.log("deselectNode"),statements.selectedNodes=[],console.log(cSt)})}function createStatement(t){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,hideEditStatement(),Array.isArray(statements.selectedNodes)){e.next=4;break}throw new Error("statements.selectedNodes is not array");case 4:if("string"!=typeof t)throw new Error("text is not string");e.next=6;break;case 6:return e.next=8,regeneratorRuntime.awrap(axios.put("http://ouri-digital-agent.cf/ibc/app/אורי/".concat(contractId,"/create_statement"),{name:"create_statement",values:{parents:statements.selectedNodes,text:t,tags:["test"]}}));case 8:n=e.sent,console.log(n),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),hideEditStatement();case 16:case"end":return e.stop()}},null,null,[[0,12]])}function showStatementEditor(e){console.log(e);var t=document.querySelector("#showStatementEditor");t.style.left="".concat(e.x,"px"),t.style.top="".concat(e.y,"px"),t.style.display="block"}function hideEditStatement(){document.querySelector("#showStatementEditor").style.display="none"}function updateStatement(e){e.preventDefault();try{var t=e.target.children.text.value;t&&(createStatement(t),e.target.reset())}catch(e){console.error(e)}}!function(){var t,n;regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(axios.post("http://ouri-digital-agent.cf/ibc/app/אורי/".concat(contractId,"/get_statements"),{name:"get_statements",values:{parent:[]}}));case 2:t=e.sent,n=t.data,console.log(n),convertAllStatmentsToMap(n),document.addEventListener("keyup",function(e){var t,n;switch(e.code){case"Tab":0<statements.selectedNodes.length&&(t=statements.selectedNodes[0],n=statements.network.getPosition(t),(n=statements.network.canvasToDOM(n)).x=n.x+150,n.y=n.y-150,showStatementEditor(n))}});case 7:case"end":return e.stop()}})}();